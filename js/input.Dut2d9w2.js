import{b5 as e,cr as t,M as a,t as o,z as n,ai as l,v as i,bC as s,W as r,_ as u,d,bD as p,bz as c,c as f,b as m,s as v,r as y,bK as g,cs as b,ct as h,N as x,af as w,I as S,o as C,U as z,ak as k,g as I,f as E,h as P,P as M,C as N,n as j,i as F,l as $,e as B,w as _,D as V,E as R,Z as L,j as H,by as O,F as T,k as W,H as K,ae as U,q as A}from"./index.CLwcgr5W.js";import{u as D}from"./index.WPFncA80.js";import{U as q,I as Y,C as Z}from"./event.BwRzfsZt.js";import{u as G}from"./index.BLAVLI0k.js";import{b as J,u as Q,a as X,c as ee}from"./use-form-common-props.IVgy7ztC.js";import{u as te,a as ae}from"./index.BEOFtOgx.js";import{d as oe}from"./error.D_Dr4eZ1.js";let ne;const le={height:"0",visibility:"hidden",overflow:t()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},ie=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],se=e=>{const t=Number.parseFloat(e);return Number.isNaN(t)?e:t};function re(t,a=1,o){var n,l;ne||(ne=document.createElement("textarea"),(null!=(n=t.parentNode)?n:document.body).appendChild(ne));const{paddingSize:i,borderSize:s,boxSizing:r,contextStyle:u}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:ie.map(e=>[e,t.getPropertyValue(e)]),paddingSize:o,borderSize:n,boxSizing:a}}(t);u.forEach(([e,t])=>null==ne?void 0:ne.style.setProperty(e,t)),Object.entries(le).forEach(([e,t])=>null==ne?void 0:ne.style.setProperty(e,t,"important")),ne.value=t.value||t.placeholder||"";let d=ne.scrollHeight;const p={};"border-box"===r?d+=s:"content-box"===r&&(d-=i),ne.value="";const c=ne.scrollHeight-i;if(e(a)){let e=c*a;"border-box"===r&&(e=e+i+s),d=Math.max(e,d),p.minHeight=`${e}px`}if(e(o)){let e=c*o;"border-box"===r&&(e=e+i+s),d=Math.min(e,d)}return p.height=`${d}px`,null==(l=ne.parentNode)||l.removeChild(ne),ne=void 0,p}const ue=o({id:{type:String,default:void 0},size:r,disabled:Boolean,modelValue:{type:n([String,Number,Object]),default:""},modelModifiers:{type:n(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:n([Boolean,Object]),default:!1},autocomplete:{type:n(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:i,default:s},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:["inside","outside"],default:"inside"},suffixIcon:{type:i},prefixIcon:{type:i},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:n([Object,Array,String]),default:()=>l({})},autofocus:Boolean,rows:{type:Number,default:2},...D(["ariaLabel"]),inputmode:{type:n(String),default:void 0},name:String}),de={[q]:e=>a(e),input:e=>a(e),change:e=>a(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent};const pe=d({name:"ElInput",inheritAttrs:!1});const ce=A(u(d({...pe,props:ue,emits:de,setup(e,{expose:t,emit:a}){const o=e,n=p(),l=G(),i=c(),s=f(()=>["textarea"===o.type?ie.b():le.b(),le.m(D.value),le.is("disabled",ne.value),le.is("exceed",je.value),{[le.b("group")]:i.prepend||i.append,[le.m("prefix")]:i.prefix||o.prefixIcon,[le.m("suffix")]:i.suffix||o.suffixIcon||o.clearable||o.showPassword,[le.bm("suffix","password-clear")]:Ee.value&&Pe.value,[le.b("hidden")]:"hidden"===o.type},n.class]),r=f(()=>[le.e("wrapper"),le.is("focus",ge.value)]),{form:u,formItem:d}=X(),{inputId:A}=ee(o,{formItemContext:d}),D=J(),ne=Q(),le=m("input"),ie=m("textarea"),ue=v(),de=v(),pe=y(!1),ce=y(!1),fe=y(),me=v(o.inputStyle),ve=f(()=>ue.value||de.value),{wrapperRef:ye,isFocused:ge,handleFocus:be,handleBlur:he}=te(ve,{disabled:ne,afterBlur(){var e;o.validateEvent&&(null==(e=null==d?void 0:d.validate)||e.call(d,"blur").catch(e=>oe()))}}),xe=f(()=>{var e;return null!=(e=null==u?void 0:u.statusIcon)&&e}),we=f(()=>(null==d?void 0:d.validateState)||""),Se=f(()=>we.value&&g[we.value]),Ce=f(()=>ce.value?b:h),ze=f(()=>[n.style]),ke=f(()=>[o.inputStyle,me.value,{resize:o.resize}]),Ie=f(()=>x(o.modelValue)?"":String(o.modelValue)),Ee=f(()=>o.clearable&&!ne.value&&!o.readonly&&!!Ie.value&&(ge.value||pe.value)),Pe=f(()=>o.showPassword&&!ne.value&&!!Ie.value),Me=f(()=>o.showWordLimit&&!!o.maxlength&&("text"===o.type||"textarea"===o.type)&&!ne.value&&!o.readonly&&!o.showPassword),Ne=f(()=>Ie.value.length),je=f(()=>!!Me.value&&Ne.value>Number(o.maxlength)),Fe=f(()=>!!i.suffix||!!o.suffixIcon||Ee.value||o.showPassword||Me.value||!!we.value&&xe.value),$e=f(()=>!!Object.keys(o.modelModifiers).length),[Be,_e]=function(e){let t;return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),i=n.slice(Math.max(0,o));t={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:i}},function(){if(null==e.value||null==t)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t;if(null==o||null==n||null==l)return;let i=a.length;if(a.endsWith(n))i=a.length-n.length;else if(a.startsWith(o))i=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(i=t+1)}e.value.setSelectionRange(i,i)}]}(ue);w(de,e=>{if(Re(),!Me.value||"both"!==o.resize)return;const t=e[0],{width:a}=t.contentRect;fe.value={right:`calc(100% - ${a+15+6}px)`}});const Ve=()=>{const{type:e,autosize:t}=o;if(K&&"textarea"===e&&de.value)if(t){const e=U(t)?t.minRows:void 0,a=U(t)?t.maxRows:void 0,o=re(de.value,e,a);me.value={overflowY:"hidden",...o},z(()=>{de.value.offsetHeight,me.value=o})}else me.value={minHeight:re(de.value).minHeight}},Re=(e=>{let t=!1;return()=>{var a;if(t||!o.autosize)return;null===(null==(a=de.value)?void 0:a.offsetParent)||(setTimeout(e),t=!0)}})(Ve),Le=()=>{const e=ve.value,t=o.formatter?o.formatter(Ie.value):Ie.value;e&&e.value!==t&&(e.value=t)},He=e=>{const{trim:t,number:a}=o.modelModifiers;return t&&(e=e.trim()),a&&(e=`${se(e)}`),o.formatter&&o.parser&&(e=o.parser(e)),e},Oe=async e=>{if(We.value)return;const{lazy:t}=o.modelModifiers;let{value:n}=e.target;t?a(Y,n):(n=He(n),String(n)!==Ie.value?(Be(),a(q,n),a(Y,n),await z(),(o.formatter&&o.parser||!$e.value)&&Le(),_e()):o.formatter&&Le())},Te=async e=>{let{value:t}=e.target;t=He(t),o.modelModifiers.lazy&&a(q,t),a(Z,t),await z(),Le()},{isComposing:We,handleCompositionStart:Ke,handleCompositionUpdate:Ue,handleCompositionEnd:Ae}=ae({emit:a,afterComposition:Oe}),De=()=>{Be(),ce.value=!ce.value,setTimeout(_e)},qe=e=>{pe.value=!1,a("mouseleave",e)},Ye=e=>{pe.value=!0,a("mouseenter",e)},Ze=e=>{a("keydown",e)},Ge=()=>{a(q,""),a(Z,""),a("clear"),a(Y,"")};return S(()=>o.modelValue,()=>{var e;z(()=>Ve()),o.validateEvent&&(null==(e=null==d?void 0:d.validate)||e.call(d,"change").catch(e=>oe()))}),S(Ie,e=>{if(!ve.value)return;const{trim:t,number:a}=o.modelModifiers,n=ve.value.value,l=!a&&"number"!==o.type||/^0\d/.test(n)?n:`${se(n)}`;l!==e&&(document.activeElement===ve.value&&"range"!==ve.value.type&&t&&l.trim()===e||Le())}),S(()=>o.type,async()=>{await z(),Le(),Ve()}),C(()=>{!o.formatter&&o.parser,Le(),z(Ve)}),t({input:ue,textarea:de,ref:ve,textareaStyle:ke,autosize:k(o,"autosize"),isComposing:We,focus:()=>{var e;return null==(e=ve.value)?void 0:e.focus()},blur:()=>{var e;return null==(e=ve.value)?void 0:e.blur()},select:()=>{var e;null==(e=ve.value)||e.select()},clear:Ge,resizeTextarea:Ve}),(e,t)=>(E(),I("div",{class:j([F(s),{[F(le).bm("group","append")]:e.$slots.append,[F(le).bm("group","prepend")]:e.$slots.prepend}]),style:W(F(ze)),onMouseenter:Ye,onMouseleave:qe},[P(" input "),"textarea"!==e.type?(E(),I(M,{key:0},[P(" prepend slot "),e.$slots.prepend?(E(),I("div",{key:0,class:j(F(le).be("group","prepend"))},[$(e.$slots,"prepend")],2)):P("v-if",!0),N("div",{ref_key:"wrapperRef",ref:ye,class:j(F(r))},[P(" prefix slot "),e.$slots.prefix||e.prefixIcon?(E(),I("span",{key:0,class:j(F(le).e("prefix"))},[N("span",{class:j(F(le).e("prefix-inner"))},[$(e.$slots,"prefix"),e.prefixIcon?(E(),B(F(R),{key:0,class:j(F(le).e("icon"))},{default:_(()=>[(E(),B(V(e.prefixIcon)))]),_:1},8,["class"])):P("v-if",!0)],2)],2)):P("v-if",!0),N("input",L({id:F(A),ref_key:"input",ref:ue,class:F(le).e("inner")},F(l),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?ce.value?"text":"password":e.type,disabled:F(ne),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:F(Ke),onCompositionupdate:F(Ue),onCompositionend:F(Ae),onInput:Oe,onChange:Te,onKeydown:Ze}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),P(" suffix slot "),F(Fe)?(E(),I("span",{key:1,class:j(F(le).e("suffix"))},[N("span",{class:j(F(le).e("suffix-inner"))},[F(Ee)&&F(Pe)&&F(Me)?P("v-if",!0):(E(),I(M,{key:0},[$(e.$slots,"suffix"),e.suffixIcon?(E(),B(F(R),{key:0,class:j(F(le).e("icon"))},{default:_(()=>[(E(),B(V(e.suffixIcon)))]),_:1},8,["class"])):P("v-if",!0)],64)),F(Ee)?(E(),B(F(R),{key:1,class:j([F(le).e("icon"),F(le).e("clear")]),onMousedown:H(F(O),["prevent"]),onClick:Ge},{default:_(()=>[(E(),B(V(e.clearIcon)))]),_:1},8,["class","onMousedown"])):P("v-if",!0),F(Pe)?(E(),B(F(R),{key:2,class:j([F(le).e("icon"),F(le).e("password")]),onClick:De},{default:_(()=>[(E(),B(V(F(Ce))))]),_:1},8,["class"])):P("v-if",!0),F(Me)?(E(),I("span",{key:3,class:j([F(le).e("count"),F(le).is("outside","outside"===e.wordLimitPosition)])},[N("span",{class:j(F(le).e("count-inner"))},T(F(Ne))+" / "+T(e.maxlength),3)],2)):P("v-if",!0),F(we)&&F(Se)&&F(xe)?(E(),B(F(R),{key:4,class:j([F(le).e("icon"),F(le).e("validateIcon"),F(le).is("loading","validating"===F(we))])},{default:_(()=>[(E(),B(V(F(Se))))]),_:1},8,["class"])):P("v-if",!0)],2)],2)):P("v-if",!0)],2),P(" append slot "),e.$slots.append?(E(),I("div",{key:1,class:j(F(le).be("group","append"))},[$(e.$slots,"append")],2)):P("v-if",!0)],64)):(E(),I(M,{key:1},[P(" textarea "),N("textarea",L({id:F(A),ref_key:"textarea",ref:de,class:[F(ie).e("inner"),F(le).is("focus",F(ge))]},F(l),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:F(ne),readonly:e.readonly,autocomplete:e.autocomplete,style:F(ke),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:F(Ke),onCompositionupdate:F(Ue),onCompositionend:F(Ae),onInput:Oe,onFocus:F(be),onBlur:F(he),onChange:Te,onKeydown:Ze}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),F(Me)?(E(),I("span",{key:0,style:W(fe.value),class:j([F(le).e("count"),F(le).is("outside","outside"===e.wordLimitPosition)])},T(F(Ne))+" / "+T(e.maxlength),7)):P("v-if",!0)],64))],38))}}),[["__file","input.vue"]]));export{ce as E};
