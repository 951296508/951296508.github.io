import{E as e}from"./index.CBGhulza.js";import{O as o,E as n}from"./popper.ri2OTzpA.js";import{E as t}from"./scrollbar.Dbr3MVrg.js";import{_ as r,d as l,l as a,r as i,A as s,o as d,i as u,aa as c,y as p,t as f,z as m,K as v,c as g,bi as b,ak as w,bj as h,I,u as y,U as E,as as C,e as _,f as F,w as T,m as R,aR as k,aS as S,g as x,h as B,bk as K,Z as M,n as O,a0 as P,E as D,b as G,x as $,J as A,B as L,L as z,C as N,D as j,j as H,P as J,bl as U,k as Y,q as W,G as q}from"./index.CLwcgr5W.js";import{d as Z,a as Q,b as V}from"./dropdown.9wMcXRum.js";import{b as X,d as ee}from"./use-form-common-props.IVgy7ztC.js";import{c as oe}from"./castArray.DrI1MKdu.js";import{c as ne}from"./refs.Cw5r5QN8.js";var te=r(l({inheritAttrs:!1}),[["render",function(e,o,n,t,r,l){return a(e.$slots,"default")}],["__file","collection.vue"]]);var re=r(l({name:"ElCollectionItem",inheritAttrs:!1}),[["render",function(e,o,n,t,r,l){return a(e.$slots,"default")}],["__file","collection-item.vue"]]);const le="data-el-collection-item",ae=f({style:{type:m([String,Array,Object])},currentTabId:{type:m(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:m(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:ie,ElCollectionItem:se,COLLECTION_INJECTION_KEY:de,COLLECTION_ITEM_INJECTION_KEY:ue}=(e=>{const o=`El${e}Collection`,n=`${o}Item`,t=Symbol(o),r=Symbol(n),l={...te,name:o,setup(){const e=i(),o=new Map;p(t,{itemMap:o,getItems:()=>{const n=u(e);if(!n)return[];const t=Array.from(n.querySelectorAll(`[${le}]`));return[...o.values()].sort((e,o)=>t.indexOf(e.ref)-t.indexOf(o.ref))},collectionRef:e})}},a={...re,name:n,setup(e,{attrs:o}){const n=i(),l=s(t,void 0);p(r,{collectionItemRef:n}),d(()=>{const e=u(n);e&&l.itemMap.set(e,{ref:e,...o})}),c(()=>{const e=u(n);l.itemMap.delete(e)})}};return{COLLECTION_INJECTION_KEY:t,COLLECTION_ITEM_INJECTION_KEY:r,ElCollection:l,ElCollectionItem:a}})("RovingFocusGroup"),ce=Symbol("elRovingFocusGroup"),pe=Symbol("elRovingFocusGroupItem"),fe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},me=e=>{const{activeElement:o}=document;for(const n of e){if(n===o)return;if(n.focus(),o!==document.activeElement)return}},ve="currentTabIdChange",ge="rovingFocusGroup.entryFocus",be={bubbles:!1,cancelable:!0},we=l({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:ae,emits:[ve,"entryFocus"],setup(e,{emit:o}){var n;const t=i(null!=(n=e.currentTabId||e.defaultCurrentTabId)?n:null),r=i(!1),l=i(!1),a=i(),{getItems:d}=s(de,void 0),c=g(()=>[{outline:"none"},e.style]),f=b(o=>{var n;null==(n=e.onMousedown)||n.call(e,o)},()=>{l.value=!0}),m=b(o=>{var n;null==(n=e.onFocus)||n.call(e,o)},e=>{const o=!u(l),{target:n,currentTarget:a}=e;if(n===a&&o&&!u(r)){const e=new Event(ge,be);if(null==a||a.dispatchEvent(e),!e.defaultPrevented){const e=d().filter(e=>e.focusable),o=[e.find(e=>e.active),e.find(e=>e.id===u(t)),...e].filter(Boolean).map(e=>e.ref);me(o)}}l.value=!1}),C=b(o=>{var n;null==(n=e.onBlur)||n.call(e,o)},()=>{r.value=!1});p(ce,{currentTabbedId:h(t),loop:w(e,"loop"),tabIndex:g(()=>u(r)?-1:0),rovingFocusGroupRef:a,rovingFocusGroupRootStyle:c,orientation:w(e,"orientation"),dir:w(e,"dir"),onItemFocus:e=>{o(ve,e)},onItemShiftTab:()=>{r.value=!0},onBlur:C,onFocus:m,onMousedown:f,onKeydown:o=>{const n=(e=>{const o=v(e);return fe[o]})(o);if(n){o.preventDefault();let l=d().filter(e=>e.focusable).map(e=>e.ref);switch(n){case"last":l.reverse();break;case"prev":case"next":{"prev"===n&&l.reverse();const a=l.indexOf(o.currentTarget);l=e.loop?(r=a+1,(t=l).map((e,o)=>t[(o+r)%t.length])):l.slice(a+1);break}}E(()=>{me(l)})}var t,r}}),I(()=>e.currentTabId,e=>{t.value=null!=e?e:null}),y(a,ge,(...e)=>{o("entryFocus",...e)})}});var he=r(l({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:ie,ElRovingFocusGroupImpl:r(we,[["render",function(e,o,n,t,r,l){return a(e.$slots,"default")}],["__file","roving-focus-group-impl.vue"]])}}),[["render",function(e,o,n,t,r,l){const i=C("el-roving-focus-group-impl"),s=C("el-focus-group-collection");return F(),_(s,null,{default:T(()=>[R(i,k(S(e.$attrs)),{default:T(()=>[a(e.$slots,"default")]),_:3},16)]),_:3})}],["__file","roving-focus-group.vue"]]);const Ie=Symbol("elDropdown"),ye="elDropdown",{ButtonGroup:Ee}=e;var Ce=r(l({name:"ElDropdown",components:{ElButton:e,ElButtonGroup:Ee,ElScrollbar:t,ElTooltip:n,ElRovingFocusGroup:he,ElOnlyChild:o,ElIcon:D,ArrowDown:P},props:Z,emits:["visible-change","click","command"],setup(e,{emit:o}){const n=L(),t=G("dropdown"),{t:r}=$(),l=i(),a=i(),s=i(),d=i(),c=i(null),f=i(null),m=i(!1),v=g(()=>({maxHeight:A(e.maxHeight)})),b=g(()=>[t.m(C.value)]),h=g(()=>oe(e.trigger)),I=ee().value,y=g(()=>e.id||I);function E(){var e;null==(e=s.value)||e.onClose()}const C=X();p(Ie,{contentRef:d,role:g(()=>e.role),triggerId:y,isUsingKeyboard:m,onItemEnter:function(){},onItemLeave:function(){const e=u(d);h.value.includes("hover")&&(null==e||e.focus({preventScroll:!0})),f.value=null},handleClose:E}),p(ye,{instance:n,dropdownSize:C,handleClick:function(){var e;null==(e=s.value)||e.onClose(void 0,0)},commandHandler:function(...e){o("command",...e)},trigger:w(e,"trigger"),hideOnClick:w(e,"hideOnClick")});return{t:r,ns:t,scrollbar:c,wrapStyle:v,dropdownTriggerKls:b,dropdownSize:C,triggerId:y,currentTabId:f,handleCurrentTabIdChange:function(e){f.value=e},handlerMainButtonClick:e=>{o("click",e)},handleClose:E,handleOpen:function(){var e;null==(e=s.value)||e.onOpen()},handleBeforeShowTooltip:function(){o("visible-change",!0)},handleShowTooltip:function(e){var o;m.value="keydown"===(null==e?void 0:e.type),null==(o=d.value)||o.focus()},handleBeforeHideTooltip:function(){o("visible-change",!1)},popperRef:s,contentRef:d,triggeringElementRef:l,referenceElementRef:a}}}),[["render",function(e,o,n,t,r,l){var i;const s=C("el-roving-focus-group"),d=C("el-scrollbar"),u=C("el-only-child"),c=C("el-tooltip"),p=C("el-button"),f=C("arrow-down"),m=C("el-icon"),v=C("el-button-group");return F(),x("div",{class:O([e.ns.b(),e.ns.is("disabled",e.disabled)])},[R(c,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"popper-style":e.popperStyle,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-arrow":e.showArrow,"show-after":"hover"===e.trigger?e.showTimeout:0,"hide-after":"hover"===e.trigger?e.hideTimeout:0,"virtual-ref":null!=(i=e.virtualRef)?i:e.triggeringElementRef,"virtual-triggering":e.virtualTriggering||e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"","focus-on-target":"",persistent:e.persistent,onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},K({content:T(()=>[R(d,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:T(()=>[R(s,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange},{default:T(()=>[a(e.$slots,"dropdown")]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:T(()=>[R(u,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:T(()=>[a(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","placement","popper-class","popper-style","trigger","trigger-keys","trigger-target-el","show-arrow","show-after","hide-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(F(),_(v,{key:0},{default:T(()=>[R(p,M({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:T(()=>[a(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),R(p,M({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:T(()=>[R(m,{class:O(e.ns.e("icon"))},{default:T(()=>[R(f)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):B("v-if",!0)],2)}],["__file","dropdown.vue"]]);var _e=r(l({components:{ElRovingFocusCollectionItem:se},props:{focusable:{type:Boolean,default:!0},active:Boolean},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:n,onItemFocus:t,onItemShiftTab:r,onKeydown:l}=s(ce,void 0),a=ee(),d=i(),c=b(e=>{o("mousedown",e)},o=>{e.focusable?t(u(a)):o.preventDefault()}),f=b(e=>{o("focus",e)},()=>{t(u(a))}),m=b(e=>{o("keydown",e)},e=>{const{shiftKey:o,target:n,currentTarget:t}=e;v(e)===z.tab&&o?r():n===t&&l(e)}),w=g(()=>n.value===u(a));return p(pe,{rovingFocusGroupItemRef:d,tabIndex:g(()=>u(w)?0:-1),handleMousedown:c,handleFocus:f,handleKeydown:m}),{id:a,handleKeydown:m,handleFocus:f,handleMousedown:c}}}),[["render",function(e,o,n,t,r,l){const i=C("el-roving-focus-collection-item");return F(),_(i,{id:e.id,focusable:e.focusable,active:e.active},{default:T(()=>[a(e.$slots,"default")]),_:3},8,["id","focusable","active"])}],["__file","roving-focus-item.vue"]]);const Fe=l({name:"DropdownItemImpl",components:{ElIcon:D},props:Q,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const n=G("dropdown"),{role:t}=s(Ie,void 0),{collectionItemRef:r}=s(ue,void 0),{rovingFocusGroupItemRef:l,tabIndex:a,handleFocus:i,handleKeydown:d,handleMousedown:u}=s(pe,void 0),c=ne(r,l),p=g(()=>"menu"===t.value?"menuitem":"navigation"===t.value?"link":"button"),f=b(e=>{const n=v(e);if([z.enter,z.numpadEnter,z.space].includes(n))return e.preventDefault(),e.stopImmediatePropagation(),o("clickimpl",e),!0},d);return{ns:n,itemRef:c,dataset:{[le]:""},role:p,tabIndex:a,handleFocus:i,handleKeydown:f,handleMousedown:u}}});const Te=()=>{const e=s(ye,{}),o=g(()=>null==e?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}};var Re=r(l({name:"ElDropdownItem",components:{ElRovingFocusItem:_e,ElDropdownItemImpl:r(Fe,[["render",function(e,o,n,t,r,l){const i=C("el-icon");return F(),x(J,null,[e.divided?(F(),x("li",{key:0,role:"separator",class:O(e.ns.bem("menu","item","divided"))},null,2)):B("v-if",!0),N("li",M({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o=>e.$emit("clickimpl",o),onFocus:e.handleFocus,onKeydown:H(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:o=>e.$emit("pointermove",o),onPointerleave:o=>e.$emit("pointerleave",o)}),[e.icon?(F(),_(i,{key:0},{default:T(()=>[(F(),_(j(e.icon)))]),_:1})):B("v-if",!0),a(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}],["__file","dropdown-item-impl.vue"]])},inheritAttrs:!1,props:Q,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:n}){const{elDropdown:t}=Te(),r=L(),{onItemEnter:l,onItemLeave:a}=s(Ie,void 0),i=b(e=>(o("pointermove",e),e.defaultPrevented),U(o=>{if(e.disabled)return void a(o);const n=o.currentTarget;n===document.activeElement||n.contains(document.activeElement)||(l(o),o.defaultPrevented||null==n||n.focus({preventScroll:!0}))})),d=b(e=>(o("pointerleave",e),e.defaultPrevented),U(a));return{handleClick:b(n=>{if(!e.disabled)return o("click",n),"keydown"!==n.type&&n.defaultPrevented},o=>{var n,l,a;e.disabled?o.stopImmediatePropagation():((null==(n=null==t?void 0:t.hideOnClick)?void 0:n.value)&&(null==(l=t.handleClick)||l.call(t)),null==(a=t.commandHandler)||a.call(t,e.command,r,o))}),handlePointerMove:i,handlePointerLeave:d,propsAndAttrs:g(()=>({...e,...n}))}}}),[["render",function(e,o,n,t,r,l){const i=C("el-dropdown-item-impl"),s=C("el-roving-focus-item");return F(),_(s,{focusable:!e.disabled},{default:T(()=>[R(i,M(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:T(()=>[a(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])}],["__file","dropdown-item.vue"]]);var ke=r(l({name:"ElDropdownMenu",props:V,setup(e){const o=G("dropdown"),{_elDropdownSize:n}=Te(),t=n.value,{contentRef:r,role:l,triggerId:a,isUsingKeyboard:i,handleClose:d}=s(Ie,void 0),{rovingFocusGroupRef:u,rovingFocusGroupRootStyle:c,onBlur:p,onFocus:f,onKeydown:m,onMousedown:w}=s(ce,void 0),{collectionRef:h}=s(de,void 0),I=g(()=>[o.b("menu"),o.bm("menu",null==t?void 0:t.value)]),y=ne(r,u,h),E=b(o=>{var n;null==(n=e.onKeydown)||n.call(e,o)},e=>{const{currentTarget:o,target:n}=e,t=v(e);if(o.contains(n),z.tab===t)return d();m(e)});return{size:t,rovingFocusGroupRootStyle:c,dropdownKls:I,role:l,triggerId:a,dropdownListWrapperRef:y,handleKeydown:E,onBlur:p,handleFocus:function(e){i.value&&f(e)},onMousedown:w}}}),[["render",function(e,o,n,t,r,l){return F(),x("ul",{ref:e.dropdownListWrapperRef,class:O(e.dropdownKls),style:Y(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onFocusin:e.handleFocus,onFocusout:e.onBlur,onKeydown:H(e.handleKeydown,["self"]),onMousedown:H(e.onMousedown,["self"])},[a(e.$slots,"default")],46,["role","aria-labelledby","onFocusin","onFocusout","onKeydown","onMousedown"])}],["__file","dropdown-menu.vue"]]);const Se=W(Ce,{DropdownItem:Re,DropdownMenu:ke}),xe=q(Re),Be=q(ke);export{Se as E,Be as a,xe as b};
