import{cr as e,t as a,ai as t,z as l,_ as s,d as n,A as o,b as r,r as i,I as u,af as d,aa as v,g as c,f as b,k as p,n as f,i as m,a9 as h,U as g,dG as y,dH as w,s as x,c as R,dI as $,o as P,ce as C,dv as E,m as N,E as k,c3 as T,a8 as S,K as B,L as A,a2 as j,M as F,b5 as L,l as _,dy as z,B as V,y as K,bz as W,cj as I,S as M,bA as O,$ as U,h as q,a1 as G,q as H,G as X}from"./index.CLwcgr5W.js";import{c as Y,r as D}from"./raf.Dkwa_YoE.js";import{c as J}from"./strings.B0-P65gW.js";import{t as Q}from"./error.D_Dr4eZ1.js";import{t as Z}from"./toNumber.CXxxQ5rM.js";import{U as ee}from"./event.BwRzfsZt.js";import{u as ae}from"./index.m1cgAaHL.js";import{o as te}from"./omit.Ya0hPkRo.js";const le="horizontal",se="vertical",ne={[le]:"deltaX",[se]:"deltaY"},oe=Symbol("tabsRootContextKey"),re=a({tabs:{type:l(Array),default:()=>t([])},tabRefs:{type:l(Object),default:()=>t({})}}),ie="ElTabBar",ue=n({name:ie});var de=s(n({...ue,props:re,setup(e,{expose:a}){const t=e,l=o(oe);l||Q(ie,"<el-tabs><el-tab-bar /></el-tabs>");const s=r("tabs"),n=i(),y=i(),w=()=>y.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(l.props.tabPosition)?"width":"height",n="width"===s?"x":"y",o="x"===n?"left":"top";return t.tabs.every(l=>{if(h(l.paneName))return!1;const n=t.tabRefs[l.paneName];if(!n)return!1;if(!l.active)return!0;e=n[`offset${J(o)}`],a=n[`client${J(s)}`];const r=window.getComputedStyle(n);return"width"===s&&(a-=Number.parseFloat(r.paddingLeft)+Number.parseFloat(r.paddingRight),e+=Number.parseFloat(r.paddingLeft)),!1}),{[s]:`${a}px`,transform:`translate${J(n)}(${e}px)`}})(),x=[];u(()=>t.tabs,async()=>{await g(),w(),x.forEach(e=>e.stop()),x.length=0,Object.values(t.tabRefs).forEach(e=>{x.push(d(e,w))})},{immediate:!0});const R=d(n,()=>w());return v(()=>{x.forEach(e=>e.stop()),x.length=0,R.stop()}),a({ref:n,update:w}),(e,a)=>(b(),c("div",{ref_key:"barRef",ref:n,class:f([m(s).e("active-bar"),m(s).is(m(l).props.tabPosition)]),style:p(y.value)},null,6))}}),[["__file","tab-bar.vue"]]);const ve=a({panes:{type:l(Array),default:()=>t([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),ce="ElTabNav",be=n({name:ce,props:ve,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(a,{expose:t,emit:l}){const s=o(oe);s||Q(ce,"<el-tabs><tab-nav /></el-tabs>");const n=r("tabs"),v=y(),c=w(),b=i(),p=i(),f=i(),m=i({}),h=i(),F=i(!1),L=i(0),_=i(!1),z=i(!0),V=x(),K=R(()=>["top","bottom"].includes(s.props.tabPosition)),W=R(()=>K.value?"width":"height"),I=R(()=>({transform:`translate${"width"===W.value?"X":"Y"}(-${L.value}px)`})),{width:M,height:O}=$(b),{width:U,height:q}=$(p,{width:0,height:0},{box:"border-box"}),G=R(()=>K.value?M.value:O.value),H=R(()=>K.value?U.value:q.value),{onWheel:X}=(({atEndEdge:a,atStartEdge:t,layout:l},s)=>{let n,o=0;const r=e=>e<0&&t.value||e>0&&a.value;return{hasReachedEdge:r,onWheel:a=>{Y(n);const t=a[ne[l.value]];r(o)&&r(o+t)||(o+=t,e()||a.preventDefault(),n=D(()=>{s(o),o=0}))}}})({atStartEdge:R(()=>L.value<=0),atEndEdge:R(()=>H.value-L.value<=G.value),layout:R(()=>K.value?"horizontal":"vertical")},e=>{var a,t,l;L.value=(a=L.value+e,t=0,void 0===(l=H.value-G.value)&&(l=t,t=void 0),void 0!==l&&(l=(l=Z(l))==l?l:0),void 0!==t&&(t=(t=Z(t))==t?t:0),function(e,a,t){return e==e&&(void 0!==t&&(e=e<=t?e:t),void 0!==a&&(e=e>=a?e:a)),e}(Z(a),t,l))}),ee=()=>{if(!b.value)return;const e=b.value[`offset${J(W.value)}`],a=L.value;if(!a)return;const t=a>e?a-e:0;L.value=t},ae=()=>{if(!b.value||!p.value)return;const e=p.value[`offset${J(W.value)}`],a=b.value[`offset${J(W.value)}`],t=L.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;L.value=l},te=async()=>{const e=p.value;if(!(F.value&&f.value&&b.value&&e))return;await g();const t=m.value[a.currentName];if(!t)return;const l=b.value,s=t.getBoundingClientRect(),n=l.getBoundingClientRect(),o=K.value?e.offsetWidth-n.width:e.offsetHeight-n.height,r=L.value;let i=r;K.value?(s.left<n.left&&(i=r-(n.left-s.left)),s.right>n.right&&(i=r+s.right-n.right)):(s.top<n.top&&(i=r-(n.top-s.top)),s.bottom>n.bottom&&(i=r+(s.bottom-n.bottom))),i=Math.max(i,0),L.value=Math.min(i,o)},le=()=>{var e;if(!p.value||!b.value)return;a.stretch&&(null==(e=h.value)||e.update());const t=p.value[`offset${J(W.value)}`],l=b.value[`offset${J(W.value)}`],s=L.value;l<t?(F.value=F.value||{},F.value.prev=s,F.value.next=s+l<t,t-s<l&&(L.value=t-l)):(F.value=!1,s>0&&(L.value=0))},se=e=>{let a=0;switch(B(e)){case A.left:case A.up:a=-1;break;case A.right:case A.down:a=1;break;default:return}const t=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let l=t.indexOf(e.target)+a;l<0?l=t.length-1:l>=t.length&&(l=0),t[l].focus({preventScroll:!0}),t[l].click(),re()},re=()=>{z.value&&(_.value=!0)},ie=()=>_.value=!1;return u(v,e=>{"hidden"===e?z.value=!1:"visible"===e&&setTimeout(()=>z.value=!0,50)}),u(c,e=>{e?setTimeout(()=>z.value=!0,50):z.value=!1}),d(f,le),P(()=>setTimeout(()=>te(),0)),C(()=>le()),t({scrollToActiveTab:te,removeFocus:ie,focusActiveTab:async()=>{await g();const e=m.value[a.currentName];null==e||e.focus({preventScroll:!0})},tabListRef:p,tabBarRef:h,scheduleRender:()=>E(V)}),()=>{const e=F.value?[N("span",{class:[n.e("nav-prev"),n.is("disabled",!F.value.prev)],onClick:ee},[N(k,null,{default:()=>[N(T,null,null)]})]),N("span",{class:[n.e("nav-next"),n.is("disabled",!F.value.next)],onClick:ae},[N(k,null,{default:()=>[N(S,null,null)]})])]:null,t=a.panes.map((e,t)=>{var o,r,i,u;const d=e.uid,v=e.props.disabled,c=null!=(r=null!=(o=e.props.name)?o:e.index)?r:`${t}`,b=!v&&(e.isClosable||!1!==e.props.closable&&a.editable);e.index=`${t}`;const p=b?N(k,{class:"is-icon-close",onClick:a=>l("tabRemove",e,a)},{default:()=>[N(j,null,null)]}):null,f=(null==(u=(i=e.slots).label)?void 0:u.call(i))||e.props.label,h=!v&&e.active?0:-1;return N("div",{ref:e=>((e,a)=>{m.value[a]=e})(e,c),class:[n.e("item"),n.is(s.props.tabPosition),n.is("active",e.active),n.is("disabled",v),n.is("closable",b),n.is("focus",_.value)],id:`tab-${c}`,key:`tab-${d}`,"aria-controls":`pane-${c}`,role:"tab","aria-selected":e.active,tabindex:h,onFocus:()=>re(),onBlur:()=>ie(),onClick:a=>{ie(),l("tabClick",e,c,a)},onKeydown:a=>{const t=B(a);!b||t!==A.delete&&t!==A.backspace||l("tabRemove",e,a)}},[f,p])});return V.value,N("div",{ref:f,class:[n.e("nav-wrap"),n.is("scrollable",!!F.value),n.is(s.props.tabPosition)]},[e,N("div",{class:n.e("nav-scroll"),ref:b},[a.panes.length>0?N("div",{class:[n.e("nav"),n.is(s.props.tabPosition),n.is("stretch",a.stretch&&["top","bottom"].includes(s.props.tabPosition))],ref:p,style:I.value,role:"tablist",onKeydown:se,onWheel:X},[a.type?null:N(de,{ref:h,tabs:[...a.panes],tabRefs:m.value},null),t]):null])])}}}),pe=a({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:l(Function),default:()=>!0},stretch:Boolean}),fe=e=>F(e)||L(e);var me=n({name:"ElTabs",props:pe,emits:{[ee]:e=>fe(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>fe(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>fe(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s;const n=r("tabs"),o=R(()=>["left","right"].includes(e.tabPosition)),{children:d,addChild:v,removeChild:c,ChildrenSorter:b}=ae(V(),"ElTabPane"),p=i(),f=i(null!=(s=e.modelValue)?s:"0"),m=async(t,l=!1)=>{var s,n,o,r;if(f.value!==t&&!h(t))try{let i;if(e.beforeLeave){const a=e.beforeLeave(t,f.value);i=a instanceof Promise?await a:a}else i=!0;if(!1!==i){const e=null==(s=d.value.find(e=>e.paneName===f.value))?void 0:s.isFocusInsidePane();f.value=t,l&&(a(ee,t),a("tabChange",t)),null==(o=null==(n=p.value)?void 0:n.removeFocus)||o.call(n),e&&(null==(r=p.value)||r.focusActiveTab())}}catch(i){}},y=(e,t,l)=>{e.props.disabled||(a("tabClick",e,l),m(t,!0))},w=(e,t)=>{e.props.disabled||h(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},x=()=>{a("edit",void 0,"add"),a("tabAdd")},$=e=>{const a=B(e);[A.enter,A.numpadEnter].includes(a)&&x()},P=a=>{const t=a.el.firstChild,l=["bottom","right"].includes(e.tabPosition)?a.children[0].el:a.children[1].el;t!==l&&t.before(l)};return u(()=>e.modelValue,e=>m(e)),u(f,async()=>{var e;await g(),null==(e=p.value)||e.scrollToActiveTab()}),K(oe,{props:e,currentName:f,registerPane:v,unregisterPane:c,nav$:p}),l({currentName:f,get tabNavRef(){return te(p.value,["scheduleRender"])}}),()=>{const a=t["add-icon"],l=e.editable||e.addable?N("div",{class:[n.e("new-tab"),o.value&&n.e("new-tab-vertical")],tabindex:"0",onClick:x,onKeydown:$},[a?_(t,"add-icon"):N(k,{class:n.is("icon-plus")},{default:()=>[N(z,null,null)]})]):null,s=N("div",{class:[n.e("header"),o.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[N(b,null,{default:()=>N(be,{ref:p,currentName:f.value,editable:e.editable,type:e.type,panes:d.value,stretch:e.stretch,onTabClick:y,onTabRemove:w},null),$stable:!0}),l]),r=N("div",{class:n.e("content")},[_(t,"default")]);return N("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:"card"===e.type,[n.m("border-card")]:"border-card"===e.type}],onVnodeMounted:P,onVnodeUpdated:P},[r,s])}}});const he=a({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),ge="ElTabPane",ye=n({name:ge});var we=s(n({...ye,props:he,setup(e){const a=e,t=V(),l=W(),s=o(oe);s||Q(ge,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=r("tab-pane"),d=i(),p=i(),h=R(()=>{var e;return null!=(e=a.closable)?e:s.props.closable}),g=I(()=>{var e;return s.currentName.value===(null!=(e=a.name)?e:p.value)}),y=i(g.value),w=R(()=>{var e;return null!=(e=a.name)?e:p.value}),x=I(()=>!a.lazy||y.value||g.value);u(g,e=>{e&&(y.value=!0)});const $=M({uid:t.uid,getVnode:()=>t.vnode,slots:l,props:a,paneName:w,active:g,index:p,isClosable:h,isFocusInsidePane:()=>{var e;return null==(e=d.value)?void 0:e.contains(document.activeElement)}});return s.registerPane($),v(()=>{s.unregisterPane($)}),O(()=>{var e;l.label&&(null==(e=s.nav$.value)||e.scheduleRender())}),(e,a)=>m(x)?U((b(),c("div",{key:0,id:`pane-${m(w)}`,ref_key:"paneRef",ref:d,class:f(m(n).b()),role:"tabpanel","aria-hidden":!m(g),"aria-labelledby":`tab-${m(w)}`},[_(e.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[G,m(g)]]):q("v-if",!0)}}),[["__file","tab-pane.vue"]]);const xe=H(me,{TabPane:we}),Re=X(we);export{Re as E,xe as a};
